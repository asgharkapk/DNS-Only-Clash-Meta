[custom]

; ===============================
; ğŸ”¹ Rulesets
; ===============================

# --- Iran Websites ---
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]GEOIP,IR
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]GEOSITE,category-ir
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,apps
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,category_ir
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,iran
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,ir
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,ircidr
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,irasn
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,arvancloud
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,derakcloud
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,iranserver
ruleset=ğŸ‡®ğŸ‡·IranWebsites,[]RULE-SET,parspack

# --- LAN / Private ---
ruleset=ğŸ–¥ï¸Lan,[]GEOSITE,private

ruleset=ğŸ–¥ï¸Lan,[]RULE-SET,C4Uprivate
ruleset=ğŸ–¥ï¸Lan,[]RULE-SET,private

;ruleset=ğŸ–¥ï¸Lan,[]GEOIP,private ;Android apps can't access proxy
;ruleset=ğŸ–¥ï¸Lan,[]GEOIP,LAN ;Android apps can't access proxy

# --- Trackers / Security / Ads ---
ruleset=ğŸ›¡ï¸PrivacyTrackers,[]RULE-SET,BanEasyPrivacy

ruleset=ğŸ›‘Advertisements,[]GEOSITE,category-ads-all
ruleset=ğŸ›‘Advertisements,[]RULE-SET,ACLBanAD
ruleset=ğŸ›‘Advertisements,[]RULE-SET,ACLBanEasyList
ruleset=ğŸ›‘Advertisements,[]RULE-SET,BanEasyListChina
ruleset=ğŸ›‘Advertisements,[]RULE-SET,IranAds
ruleset=ğŸ›‘Advertisements,[]RULE-SET,spotifyads
ruleset=ğŸ›‘Advertisements,[]RULE-SET,BanProgramAD
ruleset=ğŸ›‘Advertisements,[]RULE-SET,BanAD
ruleset=ğŸ›‘Advertisements,[]RULE-SET,PrivateTracker
ruleset=ğŸ›‘Advertisements,[]RULE-SET,category_public_tracker
ruleset=ğŸ›‘Advertisements,[]RULE-SET,LiteAds
ruleset=ğŸ›‘Advertisements,[]RULE-SET,iran_ads
ruleset=ğŸ›‘Advertisements,[]RULE-SET,PersianBlocker
ruleset=ğŸ›‘Advertisements,[]RULE-SET,ads
ruleset=ğŸ›‘Advertisements,[]RULE-SET,BanEasyList
ruleset=ğŸ›‘Advertisements,[]RULE-SET,xiaomi-ads
ruleset=ğŸ›‘Advertisements,[]RULE-SET,xiaomi_block_list

ruleset=ğŸ¦ SECURITY,[]RULE-SET,malware
ruleset=ğŸ¦ SECURITY,[]RULE-SET,cryptominers
ruleset=ğŸ¦ SECURITY,[]RULE-SET,phishing
ruleset=ğŸ¦ SECURITY,[]RULE-SET,warninglist
ruleset=ğŸ¦ SECURITY,[]RULE-SET,Ponzi

# --- Apps & Services ---
ruleset=ğŸ›NVIDIAğŸ¯,[]GEOSITE,nvidia

ruleset=</>GITğŸ¯,[]GEOSITE,github
ruleset=</>GITğŸ¯,[]GEOSITE,gitlab
ruleset=</>GITğŸ¯,[]RULE-SET,github

ruleset=ğŸ“ºYouTubeğŸ¯,[]RULE-SET,ACLyoutube
ruleset=ğŸ“ºYouTubeğŸ¯,[]RULE-SET,youtube
ruleset=ğŸ“ºYouTubeğŸ¯,[]RULE-SET,YouTubeMusic
ruleset=ğŸ“ºYouTubeğŸ¯,[]RULE-SET,10iumYouTube

ruleset=ğŸ“±GoogleğŸ¯,[]GEOSITE,google
ruleset=ğŸ“±GoogleğŸ¯,[]PROCESS-NAME,com.android.vending
ruleset=ğŸ“±GoogleğŸ¯,[]PROCESS-NAME,com.google.android.gms
ruleset=ğŸ“±GoogleğŸ¯,[]RULE-SET,ACLgoogle
ruleset=ğŸ“±GoogleğŸ¯,[]RULE-SET,google
ruleset=ğŸ“±GoogleğŸ¯,[]RULE-SET,google-play

ruleset=ğŸ“™RedditğŸ¯,[]RULE-SET,reddit

ruleset=ğŸ”µTelegramğŸ¯,[]PROCESS-NAME,Telegram.exe
ruleset=ğŸ”µTelegramğŸ¯,[]PROCESS-NAME,org.telegram.messenger
ruleset=ğŸ”µTelegramğŸ¯,[]PROCESS-NAME,org.telegram.messenger.web
ruleset=ğŸ”µTelegramğŸ¯,[]RULE-SET,ACLtelegram
ruleset=ğŸ”µTelegramğŸ¯,[]RULE-SET,telegram

ruleset=ğŸ¤–OpenAIğŸ¯,[]GEOSITE,openai
ruleset=ğŸ¤–OpenAIğŸ¯,[]RULE-SET,openai

ruleset=ğŸ¦TwitterğŸ¯,[]PROCESS-NAME,Twitter.exe
ruleset=ğŸ¦TwitterğŸ¯,[]PROCESS-NAME,com.twitter.android
ruleset=ğŸ¦TwitterğŸ¯,[]RULE-SET,ACLTwitter
ruleset=ğŸ¦TwitterğŸ¯,[]RULE-SET,C4Utwitter
ruleset=ğŸ¦TwitterğŸ¯,[]RULE-SET,mihTwitter
ruleset=ğŸ¦TwitterğŸ¯,[]RULE-SET,Domtwitter

ruleset=ğŸ¤–GrokğŸ¯,[]DOMAIN-SUFFIX,grok.com
ruleset=ğŸ¤–GrokğŸ¯,[]DOMAIN-SUFFIX,x.ai

ruleset=ğŸ—¨ï¸DiscordğŸ¯,[]RULE-SET,ACLdiscord
ruleset=ğŸ—¨ï¸DiscordğŸ¯,[]GEOSITE,discord
ruleset=ğŸ—¨ï¸DiscordğŸ¯,[]RULE-SET,discord

ruleset=ğŸ®SteamğŸ¯,[]RULE-SET,ACLsteam
ruleset=ğŸ®SteamğŸ¯,[]RULE-SET,steam
ruleset=ğŸ®SteamğŸ¯,[]RULE-SET,SteamRegionCheck

ruleset=ğŸ‘¾TwitchğŸ¯,[]RULE-SET,ACLtwitch
ruleset=ğŸ‘¾TwitchğŸ¯,[]RULE-SET,twitch

ruleset=â˜ï¸CloudflareğŸ¯,[]GEOSITE,cloudflare
ruleset=â˜ï¸CloudflareğŸ¯,[]RULE-SET,cloudflare

ruleset=ğŸ“¸InstagramğŸ¯,[]PROCESS-NAME,com.instagram.android
ruleset=ğŸ“¸InstagramğŸ¯,[]RULE-SET,ACLinsta
ruleset=ğŸ“¸InstagramğŸ¯,[]GEOSITE,instagram
ruleset=ğŸ“¸InstagramğŸ¯,[]RULE-SET,instagram

ruleset=ğŸ“˜FacebookğŸ¯,[]GEOSITE,facebook
ruleset=ğŸ“˜FacebookğŸ¯,[]RULE-SET,facebook

ruleset=ğŸ¥NetflixğŸ¯,[]GEOSITE,netflix
ruleset=ğŸ¥NetflixğŸ¯,[]RULE-SET,Netflix
ruleset=ğŸ¥NetflixğŸ¯,[]RULE-SET,NetflixIP

ruleset=ğŸ¶SpotifyğŸ¯,[]PROCESS-NAME,com.spotify.music
ruleset=ğŸ¶SpotifyğŸ¯,[]PROCESS-NAME,Spotify.exe
ruleset=ğŸ¶SpotifyğŸ¯,[]RULE-SET,ACLSpotify
ruleset=ğŸ¶SpotifyğŸ¯,[]RULE-SET,DomainSpotify
ruleset=ğŸ¶SpotifyğŸ¯,[]RULE-SET,mihspotify

ruleset=ğŸ¬TikTokğŸ¯,[]RULE-SET,TikTok

ruleset=ğŸ’¼LinkedInğŸ¯,[]GEOSITE,linkedin

ruleset=ğŸ®Dota2ğŸ¯,[]PROCESS-NAME,dota2.exe
ruleset=ğŸ®Dota2ğŸ¯,[]RULE-SET,Dota2
ruleset=ğŸ®Dota2ğŸ¯,https://raw.githubusercontent.com/asgharkapk/ACL4SSR/refs/heads/master/Clash/Dota2.list

# rules coming from rule providers in EN-IR-COUNTRY2.yml
ruleset=ğŸ“¥DownloadğŸ¯,[]RULE-SET,DownloadManagers
ruleset=ğŸ“¥DownloadğŸ¯,[]RULE-SET,Download

ruleset=ğŸ¤–AIğŸ¯,[]RULE-SET,category-ai
ruleset=ğŸ¤–AIğŸ¯,[]DOMAIN-SUFFIX,deepseek.com
ruleset=ğŸ¤–AIğŸ¯,[]DOMAIN-SUFFIX,qwen.ai

ruleset=ğŸ¤¬censorMovieğŸ¯,[]RULE-SET,censor

# rules coming from rule providers in EN-IR-COUNTRY2.yml
ruleset=ğŸ’»AnyDeskğŸ¯,[]PROCESS-NAME,com.anydesk.anydeskandroid
ruleset=ğŸ’»AnyDeskğŸ¯,[]PROCESS-NAME,AnyDesk.exe
ruleset=ğŸ’»AnyDeskğŸ¯,[]DOMAIN-SUFFIX,anydesk.com

ruleset=ğŸ•¹ï¸VideoGameğŸ¯,[]RULE-SET,game
ruleset=ğŸ•¹ï¸VideoGameğŸ¯,[]RULE-SET,category-games
ruleset=ğŸ•¹ï¸VideoGameğŸ¯,[]RULE-SET,GameDownload
ruleset=ğŸ•¹ï¸VideoGameğŸ¯,[]RULE-SET,Xbox

ruleset=ğŸ“²XiaomiğŸ¯,[]RULE-SET,xiaomi_white_list

ruleset=ğŸ’¬WhatsappğŸ¯,[]RULE-SET,whatsapp
ruleset=ğŸ’¬WhatsappğŸ¯,[]PROCESS-NAME,com.whatsapp
ruleset=ğŸ’¬WhatsappğŸ¯,[]PROCESS-NAME,WhatsApp.exe

ruleset=ğŸªŸWindowsğŸ¯,[]RULE-SET,windows

ruleset=ğŸ¦StreamerğŸ¯,[]PROCESS-NAME,obs64.exe
ruleset=ğŸ¦StreamerğŸ¯,[]PROCESS-NAME,obs-browser-page.exe

# --- Final Rule ---
ruleset=âš¡Online,[]FINAL

; ===============================
; ğŸ”¹ Group Hierarchy Explanation
; ===============================
; All internet traffic starts at âš¡Online.
; From âš¡Online you can choose:
;   - ğŸŒConnection â†’ routes via proxies (Manual, Regional, Testsâ€¦)
;   - ğŸ”“Direct â†’ bypass proxy (except destination overrides)
;   - ğŸš«Block â†’ deny traffic
;   - ğŸ¯Destinations â†’ per-service rules (e.g., YouTube, Telegram)
;
; ğŸ“ Notes:
; - If âš¡Online â†’ ğŸ”“Direct, everything except "Destination Groups" goes directly.
; - To use regional proxies, select the country inside ğŸCountries, then select ğŸCountries inside ğŸŒConnection, and finally ğŸŒConnection inside âš¡Online.
; - Each "Destination Group" (apps, services, ads, etc.) lets you override the main setting.

; ===============================
; ğŸ”¹ Proxy Selection Groups
; ===============================

custom_proxy_group=ğŸŒConnection`select`[]ğŸ”“Direct`[]ğŸš«Block

; ===============================
; ğŸ”¹ LAN / Region / Rule-based
; ===============================
custom_proxy_group=ğŸ“˜FacebookğŸ¯`select`[]ğŸš«Block`[]ğŸ”“Direct`[]ğŸŒConnection
custom_proxy_group=ğŸ›‘Advertisements`select`[]ğŸš«Block`[]ğŸ”“Direct`[]ğŸŒConnection
custom_proxy_group=ğŸ›¡ï¸PrivacyTrackers`select`[]ğŸš«Block`[]ğŸ”“Direct`[]ğŸŒConnection
custom_proxy_group=ğŸ¦ SECURITY`select`[]ğŸš«Block`[]ğŸ”“Direct`[]ğŸŒConnection

custom_proxy_group=ğŸ–¥ï¸Lan`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ‡®ğŸ‡·IranWebsites`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=</>GITğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ®Dota2ğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ®SteamğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ¤¬censorMovieğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ•¹ï¸VideoGameğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ“²XiaomiğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸªŸWindowsğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ“¥DownloadğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ’»AnyDeskğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block
custom_proxy_group=ğŸ’¬WhatsappğŸ¯`select`[]ğŸ”“Direct`[]ğŸŒConnection`[]ğŸš«Block

; ===============================
; ğŸ”¹ Service & App Destinations
; ===============================

custom_proxy_group=ğŸ›NVIDIAğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ“ºYouTubeğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ“±GoogleğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ“™RedditğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ”µTelegramğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¤–OpenAIğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¦TwitterğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¤–GrokğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ—¨ï¸DiscordğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ‘¾TwitchğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=â˜ï¸CloudflareğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ“¸InstagramğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¥NetflixğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¶SpotifyğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¬TikTokğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ’¼LinkedInğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¤–AIğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block
custom_proxy_group=ğŸ¦StreamerğŸ¯`select`[]ğŸŒConnection`[]ğŸ”“Direct`[]ğŸš«Block

; ===============================
; ğŸ”¹ Destinations Wrapper
; ===============================

custom_proxy_group=ğŸ¯Destinations`select`[]ğŸ–¥ï¸Lan`[]ğŸ‡®ğŸ‡·IranWebsites`[]ğŸ›‘Advertisements`[]ğŸ›¡ï¸PrivacyTrackers`[]ğŸ¦ SECURITY`[]</>GITğŸ¯`[]ğŸ®Dota2ğŸ¯`[]ğŸ®SteamğŸ¯`[]ğŸ“˜FacebookğŸ¯`[]ğŸ›NVIDIAğŸ¯`[]ğŸ“ºYouTubeğŸ¯`[]ğŸ“±GoogleğŸ¯`[]ğŸ“™RedditğŸ¯`[]ğŸ”µTelegramğŸ¯`[]ğŸ¤–OpenAIğŸ¯`[]ğŸ¦TwitterğŸ¯`[]ğŸ¤–GrokğŸ¯`[]ğŸ—¨ï¸DiscordğŸ¯`[]ğŸ‘¾TwitchğŸ¯`[]â˜ï¸CloudflareğŸ¯`[]ğŸ“¸InstagramğŸ¯`[]ğŸ¥NetflixğŸ¯`[]ğŸ¶SpotifyğŸ¯`[]ğŸ¬TikTokğŸ¯`[]ğŸ’¼LinkedInğŸ¯`[]ğŸ“¥DownloadğŸ¯`[]ğŸ’»AnyDeskğŸ¯`[]ğŸ¤–AIğŸ¯`[]ğŸ’¬WhatsappğŸ¯`[]ğŸ¤¬censorMovieğŸ¯`[]ğŸ•¹ï¸VideoGameğŸ¯`[]ğŸ“²XiaomiğŸ¯`[]ğŸªŸWindowsğŸ¯`[]ğŸ¦StreamerğŸ¯


; ===============================
; ğŸ”¹ Final Routing Group
; ===============================

custom_proxy_group=ğŸ”“Direct`select`[]DIRECT
custom_proxy_group=ğŸš«Block`select`[]REJECT

custom_proxy_group=âš¡Online`select`[]ğŸŒConnection`[]ğŸ¯Destinations

; ===============================
; ğŸ”¹ Generator Flags
; ===============================

enable_rule_generator=true
overwrite_original_rules=true
clash_rule_base=https://raw.githubusercontent.com/asgharkapk/DNS-Only-Clash-Meta/refs/heads/main/clash_rule_base.yml

; ==================================================
; Groups Map (Hierarchy of Traffic Flow & Selection)
; ==================================================
; Traffic (Internet) â†’ Rulesets â†’ Destination Groups â†’ ğŸŒConnection (which includes all proxy sources)
;
; â””â”€â”€ [FINAL]
;     â””â”€â”€ âš¡Online [select] (Main entry point for all traffic)
;         â”œâ”€â”€ ğŸŒConnection [select] (All proxy options)
;         â”‚   â”œâ”€â”€ ğŸ”“Direct [select: DIRECT] (Bypass proxy completely)
;         â”‚   â””â”€â”€ ğŸš«Block [select: REJECT] (Block traffic)
;         â”œâ”€â”€ ğŸ–¥ï¸Lan [select] â†’ ğŸ”“Direct / ğŸŒConnection / ğŸš«Block
;         â”œâ”€â”€ ğŸ‡®ğŸ‡·IranWebsites [select] â†’ ğŸ”“Direct / ğŸŒConnection / ğŸš«Block
;         â”œâ”€â”€ ğŸ›‘Advertisements [select] â†’ ğŸ”“Direct / ğŸŒConnection / ğŸš«Block
;         â”œâ”€â”€ ğŸ›¡ï¸PrivacyTrackers [select] â†’ ğŸ”“Direct / ğŸŒConnection / ğŸš«Block
;         â””â”€â”€ ğŸ¯App-Specific Destinations (per-service control)
;             â”œâ”€â”€ ğŸ“ºYouTubeğŸ¯
;             â”œâ”€â”€ ğŸ“±GoogleğŸ¯
;             â”œâ”€â”€ ğŸ“™RedditğŸ¯
;             â”œâ”€â”€ ğŸ”µTelegramğŸ¯
;             â”œâ”€â”€ ğŸ¤–OpenAIğŸ¯
;             â”œâ”€â”€ ğŸ¦TwitterğŸ¯
;             â”œâ”€â”€ ğŸ¤–GrokğŸ¯
;             â”œâ”€â”€ ğŸ—¨ï¸DiscordğŸ¯
;             â”œâ”€â”€ ğŸ®SteamğŸ¯
;             â”œâ”€â”€ ğŸ®Dota2ğŸ¯
;             â”œâ”€â”€ ğŸ‘¾TwitchğŸ¯
;             â”œâ”€â”€ â˜ï¸CloudflareğŸ¯
;             â”œâ”€â”€ ğŸ“·InstagramğŸ¯
;             â”œâ”€â”€ ğŸ“˜FacebookğŸ¯
;             â”œâ”€â”€ ğŸ¥NetflixğŸ¯
;             â”œâ”€â”€ ğŸ¶SpotifyğŸ¯
;             â”œâ”€â”€ ğŸ¬TikTokğŸ¯
;             â”œâ”€â”€ ğŸ›NVIDIAğŸ¯
;             â”œâ”€â”€ </>GITğŸ¯
;             â””â”€â”€ ğŸ’¼LinkedInğŸ¯
;             (Each â†’ ğŸ”“Direct / ğŸŒConnection / ğŸš«Block)
